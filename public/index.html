<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <title>Margartia Calculator</title>
</head>
<body>
    <div class="p-2 m-2 w-1-2 sm:w-full">
        <h1 class="text-3xl font-bold text-teal-900 text-center">
          Margarita Calculator
        </h1>
        <h2 class="text-2xl font-bold text-teal-900">Recipe</h2>
        <form action="javascript:submit()" method="get" class="text-lg">
            <div class="grid grid-cols-3 w-80 ml-6">
                <label class="" for="tequila">Tequila</label>
                <input type="text" id="tequila" name="tequila" value="2.5">
                <div>Parts</div>

                <label for="controy">Controy</label>
                <input type="text" id="controy" name="controy" value="2">
                <div>Parts</div>

                <label for="lime">Lime</label>
                <input type="text" id="lime" name="lime" value="1">
                <div>Parts</div>

                <label for="water">Water</label>
                <input type="text" id="water" name="water" value="2">
                <div>Parts</div>
            </div>
            <div class="grid grid-cols-3 w-80 ml-6">
                <label for="amount">Quantity </label>
                <input type="text" name="amount" id="amount" value="1000">
                <div>ml</div>
            </div>

            <button name="go" type="submit" class="mt-3 bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded-xl">Calculate</button>
    </form>
    <div id="formula" class="text-xl ml-3 mt-3">

    </div>

</div>
</body>
<script>
    function submit(){
        var total = document.getElementById('amount').value;
        var water = document.getElementById('water').value;
        var tequila = document.getElementById('tequila').value;
        var controy = document.getElementById('controy').value;
        var lime = document.getElementById('lime').value;

        const ingredient_names = ['Tequila', 'Controy', 'Lime', 'Water'];
        var ingredient_amounts=[parseFloat(tequila), parseFloat(controy), parseFloat(lime), parseFloat(water)];
	// ingredient_amounts.push(Number(water));
console.log(ingredient_amounts);

        const tot_amts = ingredient_amounts.reduce((tot,amt)=> tot+amt);
        // console.log(tot_amts);

        var div = document.getElementById("formula");

        div.innerHTML = "<hr>";

        for (let i=0;i<ingredient_names.length;i++){
            let amt = Math.round((total/tot_amts)*ingredient_amounts[i]);

            var div = document.getElementById("formula");

            // console.log(`${ingredient_names[i]}: ${amt}`);
            var x = document.createElement('p');
            var t = document.createTextNode(ingredient_names[i] +": "+ amt + " ml");
            x.appendChild(t);
            div.appendChild(x);
            x.classList.add("m-2");
        }
    }
</script>
</html>